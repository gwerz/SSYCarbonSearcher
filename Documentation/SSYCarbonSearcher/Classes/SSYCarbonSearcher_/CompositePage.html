<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html><head>
    <title>SSYCarbonSearcher </title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 <meta name="generator" content="HeaderDoc" />
<style type="text/css"><!--.keyword {background:#ffffff; color:#761550;}.template {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.function {background:#ffffff; color:#000000;}.string {background: #ffffff; color:#891315;}.preprocessor {background:#ffffff; color:#236e25}.comment {background:#ffffff; color:#236e25}.char {background: #ffffff; color:#0000ff;}.var {background:#ffffff; color:#000000;}.type {background:#ffffff; color:#761550;}.param {background:#ffffff; color:#000000;}a:link {text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: small; color: #0000ff;}a:visited {text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: small; color: #0000ff;}a:visited:hover {text-decoration: underline; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: small; color: #ff6600;}a:active {text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: small; color: #ff6600;}a:hover {text-decoration: underline; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: small; color: #ff6600;}h4 {text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: tiny; font-weight: bold;}body {text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: 10pt;}--></style></head><body bgcolor="#ffffff">
<a name="top"></a>
<a name="//apple_ref/doc/class/SSYCarbonSearcher" title="SSYCarbonSearcher "></a>
<hr><table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5"><h1><a name="SSYCarbonSearcher">SSYCarbonSearcher </a></h1>
</td></tr></table><hr><p><!-- begin abstract -->    This class provides a class method for searching the startup disk for files matching a given name, returning paths.
<!-- end abstract --></p>
<p><b>Superclass:</b> <!-- a logicalPath="//apple_ref/occ/cl/NSObject" -->NSObject<!-- /a --><br>
<b>Declared In:</b> <a href="../../index.html" target="_top">SSYCarbonSearcher.h</a><br>
</p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->  This class uses Carbon's old File Manager.  PBCatalogSearch[A]Sync() does the actual work.  This is way faster than Unix 'find', but not as fast as a Spotlight search.  However it is more comprehensive than a Spotlight search because (1) user cannot exclude directories using Spotlight's Preferences, (2) it searches inside packages.  There may be other differences that I am not aware of.
<br><br>
I believe this class should work at least down to Mac OS 10.3, but have not tested it in Mac OS 10.3.
<br><br>
A unix command-line wrapper, CarbonSearch, and also a Cocoa application (windowless, prints to log), CarbonSearcherApp, are available to demonstrate the class and to use as a utility.
 <!-- end discussion --></p>
<p></p><hr><br><h2>Methods</h2>
<a name="HeaderDoc_methods"></a>
<dl>
<dt><tt><a href="CompositePage.html#//apple_ref/doc/compositePage/occ/clm/SSYCarbonSearcher/catalogPathsForName:fullNameSearch:findDirectories:findFiles:maxFindsPerIteration:maxSecondsPerIteration:maxIterations:maxFindsGrandTotal:verbose:printResultsEachIteration:syncResults_p:asyncCallbackTarget:asyncCallbackSelector:err_p:" target="_top">+catalogPathsForName:fullNameSearch:findDirectories:findFiles:maxFindsPerIteration:maxSecondsPerIteration:maxIterations:maxFindsGrandTotal:verbose:printResultsEachIteration:syncResults_p:asyncCallbackTarget:asyncCallbackSelector:err_p: </a></tt></dt>
<dd>Performs a synchronous or asynchronous search of the startup disk catalog, finding the full paths of files matching a given name
</dd>
</dl>
<hr><!-- headerDoc=clm;  uid=//apple_ref/doc/compositePage/occ/clm/SSYCarbonSearcher/catalogPathsForName:fullNameSearch:findDirectories:findFiles:maxFindsPerIteration:maxSecondsPerIteration:maxIterations:maxFindsGrandTotal:verbose:printResultsEachIteration:syncResults_p:asyncCallbackTarget:asyncCallbackSelector:err_p:;  name=SSYCarbonSearcher::catalogPathsForName:fullNameSearch:findDirectories:findFiles:maxFindsPerIteration:maxSecondsPerIteration:maxIterations:maxFindsGrandTotal:verbose:printResultsEachIteration:syncResults_p:asyncCallbackTarget:asyncCallbackSelector:err_p: -->
<a name="//apple_ref/doc/compositePage/occ/clm/SSYCarbonSearcher/catalogPathsForName:fullNameSearch:findDirectories:findFiles:maxFindsPerIteration:maxSecondsPerIteration:maxIterations:maxFindsGrandTotal:verbose:printResultsEachIteration:syncResults_p:asyncCallbackTarget:asyncCallbackSelector:err_p:"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5"><h3><a name="catalogPathsForName:fullNameSearch:findDirectories:findFiles:maxFindsPerIteration:maxSecondsPerIteration:maxIterations:maxFindsGrandTotal:verbose:printResultsEachIteration:syncResults_p:asyncCallbackTarget:asyncCallbackSelector:err_p:">catalogPathsForName:fullNameSearch:findDirectories:findFiles:maxFindsPerIteration:maxSecondsPerIteration:maxIterations:maxFindsGrandTotal:verbose:printResultsEachIteration:syncResults_p:asyncCallbackTarget:asyncCallbackSelector:err_p: </a></h3>
</td></tr></table><hr><p><!-- begin abstract -->Performs a synchronous or asynchronous search of the startup disk catalog, finding the full paths of files matching a given name
<!-- end abstract --></p>
<p></p><pre>+ (<!-- a logicalPath="//apple_ref/occ/cl/BOOL //apple_ref/occ/tdef/BOOL //apple_ref/occ/tag/BOOL //apple_ref/occ/econst/BOOL //apple_ref/occ/struct/BOOL //apple_ref/occ/clconst/BOOL //apple_ref/occ/intf/BOOL" --><span class="type">BOOL</span><!-- /a -->)<!-- a logicalPath="//apple_ref/occ/instm/catalogPathsForName //apple_ref/occ/clm/catalogPathsForName //apple_ref/occ/intfcm/catalogPathsForName //apple_ref/occ/intfm/catalogPathsForName //apple_ref/occ/func/catalogPathsForName //apple_ref/occ/ftmplt/catalogPathsForName //apple_ref/occ/defn/catalogPathsForName //apple_ref/occ/macro/catalogPathsForName" --><span class="function">catalogPathsForName</span><!-- /a -->:(<!-- a logicalPath="//apple_ref/occ/cl/NSString //apple_ref/occ/tdef/NSString //apple_ref/occ/tag/NSString //apple_ref/occ/econst/NSString //apple_ref/occ/struct/NSString //apple_ref/occ/clconst/NSString //apple_ref/occ/intf/NSString" --><span class="type">NSString</span><!-- /a --><span class="type">*</span>)<span class="param">searchString</span> <!-- a logicalPath="//apple_ref/occ/instm/fullNameSearch //apple_ref/occ/clm/fullNameSearch //apple_ref/occ/intfcm/fullNameSearch //apple_ref/occ/intfm/fullNameSearch //apple_ref/occ/func/fullNameSearch //apple_ref/occ/ftmplt/fullNameSearch //apple_ref/occ/defn/fullNameSearch //apple_ref/occ/macro/fullNameSearch" --><span class="function">fullNameSearch</span><!-- /a -->:(<!-- a logicalPath="//apple_ref/occ/cl/BOOL //apple_ref/occ/tdef/BOOL //apple_ref/occ/tag/BOOL //apple_ref/occ/econst/BOOL //apple_ref/occ/struct/BOOL //apple_ref/occ/clconst/BOOL //apple_ref/occ/intf/BOOL" --><span class="type">BOOL</span><!-- /a -->)<span class="param">fullNameSearch</span> <!-- a logicalPath="//apple_ref/occ/instm/findDirectories //apple_ref/occ/clm/findDirectories //apple_ref/occ/intfcm/findDirectories //apple_ref/occ/intfm/findDirectories //apple_ref/occ/func/findDirectories //apple_ref/occ/ftmplt/findDirectories //apple_ref/occ/defn/findDirectories //apple_ref/occ/macro/findDirectories" --><span class="function">findDirectories</span><!-- /a -->:(<!-- a logicalPath="//apple_ref/occ/cl/BOOL //apple_ref/occ/tdef/BOOL //apple_ref/occ/tag/BOOL //apple_ref/occ/econst/BOOL //apple_ref/occ/struct/BOOL //apple_ref/occ/clconst/BOOL //apple_ref/occ/intf/BOOL" --><span class="type">BOOL</span><!-- /a -->)<span class="param">findDirectories</span> <!-- a logicalPath="//apple_ref/occ/instm/findFiles //apple_ref/occ/clm/findFiles //apple_ref/occ/intfcm/findFiles //apple_ref/occ/intfm/findFiles //apple_ref/occ/func/findFiles //apple_ref/occ/ftmplt/findFiles //apple_ref/occ/defn/findFiles //apple_ref/occ/macro/findFiles" --><span class="function">findFiles</span><!-- /a -->:(<!-- a logicalPath="//apple_ref/occ/cl/BOOL //apple_ref/occ/tdef/BOOL //apple_ref/occ/tag/BOOL //apple_ref/occ/econst/BOOL //apple_ref/occ/struct/BOOL //apple_ref/occ/clconst/BOOL //apple_ref/occ/intf/BOOL" --><span class="type">BOOL</span><!-- /a -->)<span class="param">findFiles</span> <!-- a logicalPath="//apple_ref/occ/instm/maxFindsPerIteration //apple_ref/occ/clm/maxFindsPerIteration //apple_ref/occ/intfcm/maxFindsPerIteration //apple_ref/occ/intfm/maxFindsPerIteration //apple_ref/occ/func/maxFindsPerIteration //apple_ref/occ/ftmplt/maxFindsPerIteration //apple_ref/occ/defn/maxFindsPerIteration //apple_ref/occ/macro/maxFindsPerIteration" --><span class="function">maxFindsPerIteration</span><!-- /a -->:(<!-- a logicalPath="//apple_ref/occ/cl/UInt32 //apple_ref/occ/tdef/UInt32 //apple_ref/occ/tag/UInt32 //apple_ref/occ/econst/UInt32 //apple_ref/occ/struct/UInt32 //apple_ref/occ/clconst/UInt32 //apple_ref/occ/intf/UInt32" --><span class="type">UInt32</span><!-- /a -->)<span class="param">maxFindsPerIteration</span> <!-- a logicalPath="//apple_ref/occ/instm/maxSecondsPerIteration //apple_ref/occ/clm/maxSecondsPerIteration //apple_ref/occ/intfcm/maxSecondsPerIteration //apple_ref/occ/intfm/maxSecondsPerIteration //apple_ref/occ/func/maxSecondsPerIteration //apple_ref/occ/ftmplt/maxSecondsPerIteration //apple_ref/occ/defn/maxSecondsPerIteration //apple_ref/occ/macro/maxSecondsPerIteration" --><span class="function">maxSecondsPerIteration</span><!-- /a -->:(<!-- a logicalPath="//apple_ref/occ/cl/float //apple_ref/occ/tdef/float //apple_ref/occ/tag/float //apple_ref/occ/econst/float //apple_ref/occ/struct/float //apple_ref/occ/clconst/float //apple_ref/occ/intf/float" --><span class="type">float</span><!-- /a -->)<span class="param">maxSecondsPerIteration</span> <!-- a logicalPath="//apple_ref/occ/instm/maxIterations //apple_ref/occ/clm/maxIterations //apple_ref/occ/intfcm/maxIterations //apple_ref/occ/intfm/maxIterations //apple_ref/occ/func/maxIterations //apple_ref/occ/ftmplt/maxIterations //apple_ref/occ/defn/maxIterations //apple_ref/occ/macro/maxIterations" --><span class="function">maxIterations</span><!-- /a -->:(<!-- a logicalPath="//apple_ref/occ/cl/int //apple_ref/occ/tdef/int //apple_ref/occ/tag/int //apple_ref/occ/econst/int //apple_ref/occ/struct/int //apple_ref/occ/clconst/int //apple_ref/occ/intf/int" --><span class="type">int</span><!-- /a -->)<span class="param">maxIterations</span> <!-- a logicalPath="//apple_ref/occ/instm/maxFindsGrandTotal //apple_ref/occ/clm/maxFindsGrandTotal //apple_ref/occ/intfcm/maxFindsGrandTotal //apple_ref/occ/intfm/maxFindsGrandTotal //apple_ref/occ/func/maxFindsGrandTotal //apple_ref/occ/ftmplt/maxFindsGrandTotal //apple_ref/occ/defn/maxFindsGrandTotal //apple_ref/occ/macro/maxFindsGrandTotal" --><span class="function">maxFindsGrandTotal</span><!-- /a -->:(<!-- a logicalPath="//apple_ref/occ/cl/UInt32 //apple_ref/occ/tdef/UInt32 //apple_ref/occ/tag/UInt32 //apple_ref/occ/econst/UInt32 //apple_ref/occ/struct/UInt32 //apple_ref/occ/clconst/UInt32 //apple_ref/occ/intf/UInt32" --><span class="type">UInt32</span><!-- /a -->)<span class="param">maxFindsGrandTotal</span> <!-- a logicalPath="//apple_ref/occ/instm/verbose //apple_ref/occ/clm/verbose //apple_ref/occ/intfcm/verbose //apple_ref/occ/intfm/verbose //apple_ref/occ/func/verbose //apple_ref/occ/ftmplt/verbose //apple_ref/occ/defn/verbose //apple_ref/occ/macro/verbose" --><span class="function">verbose</span><!-- /a -->:(<!-- a logicalPath="//apple_ref/occ/cl/BOOL //apple_ref/occ/tdef/BOOL //apple_ref/occ/tag/BOOL //apple_ref/occ/econst/BOOL //apple_ref/occ/struct/BOOL //apple_ref/occ/clconst/BOOL //apple_ref/occ/intf/BOOL" --><span class="type">BOOL</span><!-- /a -->)<span class="param">verbose</span> <!-- a logicalPath="//apple_ref/occ/instm/printResultsEachIteration //apple_ref/occ/clm/printResultsEachIteration //apple_ref/occ/intfcm/printResultsEachIteration //apple_ref/occ/intfm/printResultsEachIteration //apple_ref/occ/func/printResultsEachIteration //apple_ref/occ/ftmplt/printResultsEachIteration //apple_ref/occ/defn/printResultsEachIteration //apple_ref/occ/macro/printResultsEachIteration" --><span class="function">printResultsEachIteration</span><!-- /a -->:(<!-- a logicalPath="//apple_ref/occ/cl/BOOL //apple_ref/occ/tdef/BOOL //apple_ref/occ/tag/BOOL //apple_ref/occ/econst/BOOL //apple_ref/occ/struct/BOOL //apple_ref/occ/clconst/BOOL //apple_ref/occ/intf/BOOL" --><span class="type">BOOL</span><!-- /a -->)<span class="param">printResultsEachIteration</span> <!-- a logicalPath="//apple_ref/occ/instm/syncResults_p //apple_ref/occ/clm/syncResults_p //apple_ref/occ/intfcm/syncResults_p //apple_ref/occ/intfm/syncResults_p //apple_ref/occ/func/syncResults_p //apple_ref/occ/ftmplt/syncResults_p //apple_ref/occ/defn/syncResults_p //apple_ref/occ/macro/syncResults_p" --><span class="function">syncResults_p</span><!-- /a -->:(<!-- a logicalPath="//apple_ref/occ/cl/NSDictionary //apple_ref/occ/tdef/NSDictionary //apple_ref/occ/tag/NSDictionary //apple_ref/occ/econst/NSDictionary //apple_ref/occ/struct/NSDictionary //apple_ref/occ/clconst/NSDictionary //apple_ref/occ/intf/NSDictionary" --><span class="type">NSDictionary</span><!-- /a --><span class="type">*</span><span class="type">*</span>)<span class="param">syncResults</span> <!-- a logicalPath="//apple_ref/occ/instm/asyncCallbackTarget //apple_ref/occ/clm/asyncCallbackTarget //apple_ref/occ/intfcm/asyncCallbackTarget //apple_ref/occ/intfm/asyncCallbackTarget //apple_ref/occ/func/asyncCallbackTarget //apple_ref/occ/ftmplt/asyncCallbackTarget //apple_ref/occ/defn/asyncCallbackTarget //apple_ref/occ/macro/asyncCallbackTarget" --><span class="function">asyncCallbackTarget</span><!-- /a -->:(<!-- a logicalPath="//apple_ref/occ/cl/id //apple_ref/occ/tdef/id //apple_ref/occ/tag/id //apple_ref/occ/econst/id //apple_ref/occ/struct/id //apple_ref/occ/clconst/id //apple_ref/occ/intf/id" --><span class="type">id</span><!-- /a -->)<span class="param">asyncCallbackTarget</span> <!-- a logicalPath="//apple_ref/occ/instm/asyncCallbackSelector //apple_ref/occ/clm/asyncCallbackSelector //apple_ref/occ/intfcm/asyncCallbackSelector //apple_ref/occ/intfm/asyncCallbackSelector //apple_ref/occ/func/asyncCallbackSelector //apple_ref/occ/ftmplt/asyncCallbackSelector //apple_ref/occ/defn/asyncCallbackSelector //apple_ref/occ/macro/asyncCallbackSelector" --><span class="function">asyncCallbackSelector</span><!-- /a -->:(<!-- a logicalPath="//apple_ref/occ/cl/SEL //apple_ref/occ/tdef/SEL //apple_ref/occ/tag/SEL //apple_ref/occ/econst/SEL //apple_ref/occ/struct/SEL //apple_ref/occ/clconst/SEL //apple_ref/occ/intf/SEL" --><span class="type">SEL</span><!-- /a -->)<span class="param">asyncCallbackSelector</span> <!-- a logicalPath="//apple_ref/occ/instm/err_p //apple_ref/occ/clm/err_p //apple_ref/occ/intfcm/err_p //apple_ref/occ/intfm/err_p //apple_ref/occ/func/err_p //apple_ref/occ/ftmplt/err_p //apple_ref/occ/defn/err_p //apple_ref/occ/macro/err_p" --><span class="function">err_p</span><!-- /a -->:(<!-- a logicalPath="//apple_ref/occ/cl/OSErr //apple_ref/occ/tdef/OSErr //apple_ref/occ/tag/OSErr //apple_ref/occ/econst/OSErr //apple_ref/occ/struct/OSErr //apple_ref/occ/clconst/OSErr //apple_ref/occ/intf/OSErr" --><span class="type">OSErr</span><!-- /a --><span class="type">*</span>)<span class="var">err_p</span>;</pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>searchString </code></dt><dd>filename, or part of a filename, to be searched for.</dd>
<dt><code>fullNameSearch </code></dt><dd>If YES, narrowly filters results to require that filenames match the entire searchString. If NO, a partial match is sufficient.</dd>
<dt><code>findDirectories </code></dt><dd>If NO, directories will be excluded from results. If findDirectories is NO, then findFiles must be YES or an exception will be raised.</dd>
<dt><code>findFiles </code></dt><dd>If NO, regular files will be excluded from results. If findFiles is NO, then findDirectories must be YES or an exception will be raised.</dd>
<dt><code>maxFindsPerIteration </code></dt><dd>The maximum number of paths allowed to be found per iteration. When this is reached, another iteration is started.</dd>
<dt><code>maxSecondsPerIteration </code></dt><dd>The maximum time in seconds allowed per iteration. When this is reached, another iteration is started.</dd>
<dt><code>maxIterations </code></dt><dd>The maximum number of iterations allowed. When this is exceeded, the search is aborted.</dd>
<dt><code>maxFindsGrandTotal </code></dt><dd>The maximum number of paths allowed to be found. When this is exceeded, the search is aborted.</dd>
<dt><code>verbose </code></dt><dd>If YES, prints diagnostics to console</dd>
<dt><code>printResultsEachIteration </code></dt><dd>If YES, prints paths found after each iteration</dd>
<dt><code>syncResults </code></dt><dd>If this argument is NULL, the search is run asynchronously (see Discussion). Otherwise, this should be a handle to an NSDictionary to which the results will be returned. The dictionary entries are the keys SSYCarbonSearcherResultsKeyXXXXXX. See "Constants" for a list of the keys and description of their values.</dd>
<dt><code>asyncCallbackTarget </code></dt><dd>The object (NSObject) to which results messages will be sent, if searching asynchronously. This argument is required to be non-nil if searching asynchronously, syncResults=NULL. Otherwise, it is ignored.</dd>
<dt><code>asyncCallbackSelector </code></dt><dd>The selector (method) via which results messages will be sent, if searching asynchronously. This argument is required to be non-NULL if searching asynchronously, syncResults=NULL. Otherwise, it is ignored. This selector must take one argument, an NSDictionary*, and return an integer. The NSDictionary will contain the SSYCarbonSearcherResultsKeyXXXX keys. The integer returned should be one of the enumeration constants in SSYCarbonSearcherContinueStyle.</dd>
<dt><code>err_p </code></dt><dd>If you pass a pointer to an OSErr, on output it will point to the last OSErr value generated by File Manager functions. Note that a value of -1417, indicating errFSNoMoreItems, is normal when the search is completed.</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value -->For an asynchronous search, returns YES if the search was initiated with no errors and NO otherwise. For an synchronous search, returns YES if the search was completed with no errors and NO otherwise.
 
<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->My apologies for having so many arguments, but believe me it's better than filling out a parameter block. Much of the complication comes from the fact that the search is broken up into partial searches called "iterations". This is necessary since the PBCatalogSearch[A]Sync() which does the actual work returns results in 'C' arrays which must be dimensioned to a finite size. In other words, if there are many results you need to empty the bucket once in awhile. This can be thought of as "feature" in that you can print partial results after each iteration. In this implementation, partial results just get printed to the console. If a non-NULL syncResults argument is provided, the search is performed synchronously (blocking the calling thread until the search is complete). If syncResults is NULL, the search is performed asynchronously (not blocking, using PBCatalogSearchAsync), and results are returned to the asyncCallbackTarget via the asyncCallbackSelector. Results will be returned for each iteration. The asynchronous mode is recommended in applcations where it is undesirable to freeze the user interface.
<!-- end discussion --></p>
<p></p><p>Last Updated: Monday, September 29, 2008
</p></body></html>
